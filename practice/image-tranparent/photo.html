<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Morphing Spotlight to Grid Effect</title>

<style>
html, body {
  margin: 0;
  height: 100%;
}

.container {
  position: relative;
  width: 100vw;
  height: 100vh;
  overflow: hidden;
}

/* IMAGES */
.base, .skeleton {
  position: absolute;
  width: 100%;
  height: 100%;
  object-fit: cover;
}

.skeleton {
  pointer-events: none;
  transition: mask-image 0.2s ease;
}
</style>
</head>

<body>

<div class="container">
  <img src="photo.jpg" class="base">
  <img src="skeleton.png" class="skeleton">
</div>

<script>
const skeleton = document.querySelector(".skeleton");

let locked = false;
let lockX = 0;
let lockY = 0;

document.addEventListener("mousemove", (e) => {
  if (locked) return;

  const x = e.clientX;
  const y = e.clientY;

  skeleton.style.maskImage = `
    radial-gradient(circle 160px at ${x}px ${y}px,
      white 0%,
      white 60%,
      transparent 100%
    )
  `;
  skeleton.style.webkitMaskImage = skeleton.style.maskImage;
});

/* LOCK + MORPH ON CLICK (FINAL EFFECT) */
document.addEventListener("click", (e) => {
  if (locked) return;

  locked = true;
  lockX = e.clientX;
  lockY = e.clientY;

  /* MORPH INTO CUBE GRID */
  skeleton.style.maskImage = `
    repeating-linear-gradient(
      0deg,
      white 0px,
      white 18px,
      transparent 18px,
      transparent 20px
    ),
    repeating-linear-gradient(
      90deg,
      white 0px,
      white 18px,
      transparent 18px,
      transparent 20px
    ),
    radial-gradient(
      circle 180px at ${lockX}px ${lockY}px,
      white 60%,
      transparent 100%
    )
  `;

  skeleton.style.webkitMaskImage = skeleton.style.maskImage;
});
</script>

</body>
</html>
